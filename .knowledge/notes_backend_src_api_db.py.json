{"is_source_file": true, "format": "Python", "description": "This file provides database utilities for managing notes in a SQLite database, including connection management, schema initialization, and CRUD operations specific to notes.", "external_files": ["os", "sqlite3", "contextlib", "typing"], "external_methods": ["os.getenv", "sqlite3.connect", "sqlite3.Cursor.description", "sqlite3.Row", "conn.execute"], "published": ["get_connection", "init_db", "now_iso", "fetch_note"], "classes": [], "methods": [{"name": "str _resolve_db_path()", "description": "Resolves the path to the SQLite database file, using environment variable or default.", "scope": "", "scopeKind": ""}, {"name": "dict _dict_factory(cursor: sqlite3.Cursor, row: sqlite3.Row)", "description": "Converts SQLite query result rows to dictionaries keyed by column names.", "scope": "", "scopeKind": ""}, {"name": "Generator[sqlite3.Connection,None,None] get_connection()", "description": "Provides a context-managed SQLite database connection with specific pragma settings.", "scope": "", "scopeKind": ""}, {"name": "None init_db()", "description": "Initializes and migrates the database schema for notes.", "scope": "", "scopeKind": ""}, {"name": "str now_iso(conn: sqlite3.Connection)", "description": "Returns the current database time in ISO format.", "scope": "", "scopeKind": ""}, {"name": "Optional[dict] fetch_note(conn: sqlite3.Connection, note_id: int)", "description": "Fetches a note by its ID from the database.", "scope": "", "scopeKind": ""}], "calls": ["os.getenv", "sqlite3.connect", "conn.execute", "conn.execute", "conn.execute", "conn.execute", "conn.execute", "conn.execute"], "search-terms": ["sqlite3", "notes table schema", "database connection", "init_db", "fetch_note", "notes schema migration"], "state": 2, "file_id": 5, "knowledge_revision": 15, "git_revision": "", "ctags": [{"_type": "tag", "name": "_dict_factory", "path": "/home/kavia/workspace/code-generation/simple-notes-app-311560-311569/notes_backend/src/api/db.py", "pattern": "/^def _dict_factory(cursor: sqlite3.Cursor, row: sqlite3.Row) -> dict:$/", "language": "Python", "typeref": "typename:dict", "kind": "function", "signature": "(cursor: sqlite3.Cursor, row: sqlite3.Row)"}, {"_type": "tag", "name": "_resolve_db_path", "path": "/home/kavia/workspace/code-generation/simple-notes-app-311560-311569/notes_backend/src/api/db.py", "pattern": "/^def _resolve_db_path() -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "fetch_note", "path": "/home/kavia/workspace/code-generation/simple-notes-app-311560-311569/notes_backend/src/api/db.py", "pattern": "/^def fetch_note(conn: sqlite3.Connection, note_id: int) -> Optional[dict]:$/", "language": "Python", "typeref": "typename:Optional[dict]", "kind": "function", "signature": "(conn: sqlite3.Connection, note_id: int)"}, {"_type": "tag", "name": "get_connection", "path": "/home/kavia/workspace/code-generation/simple-notes-app-311560-311569/notes_backend/src/api/db.py", "pattern": "/^def get_connection() -> Generator[sqlite3.Connection, None, None]:$/", "language": "Python", "typeref": "typename:Generator[sqlite3.Connection,None,None]", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "init_db", "path": "/home/kavia/workspace/code-generation/simple-notes-app-311560-311569/notes_backend/src/api/db.py", "pattern": "/^def init_db() -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "now_iso", "path": "/home/kavia/workspace/code-generation/simple-notes-app-311560-311569/notes_backend/src/api/db.py", "pattern": "/^def now_iso(conn: sqlite3.Connection) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(conn: sqlite3.Connection)"}], "hash": "c1dbb22f3a495c6208f2852c1858751a", "format-version": 4, "code-base-name": "notes_backend", "filename": "notes_backend/src/api/db.py", "revision_history": [{"15": ""}]}